<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= workbook ? workbook.title + ' - ' : '' %>Table of Contents - Top Voices Workbook</title>
    <link href="/styles.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <meta name="description" content="<%= workbook ? workbook.description : 'Master essential skills with this comprehensive workbook covering strategy, implementation, and best practices.' %>">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="<%= workbook ? workbook.title + ' - ' : '' %>Table of Contents - Top Voices Workbook">
    <meta property="og:description" content="<%= workbook ? workbook.description : 'Master essential skills with this comprehensive workbook covering strategy, implementation, and best practices.' %>">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://top-voices-workbook.vercel.app<%= workbook ? '/workbook/' + workbook.slug : '' %>">
    <meta property="og:image" content="https://top-voices-workbook.vercel.app/<%= workbook && workbook.image ? workbook.image : 'caleb-photo.webp' %>">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="<%= workbook ? workbook.author + ' - ' + workbook.title : 'Top Voices Workbook' %>">
    <meta property="og:site_name" content="Top Voices Workbook">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= workbook ? workbook.title + ' - ' : '' %>Table of Contents - Top Voices Workbook">
    <meta name="twitter:description" content="<%= workbook ? workbook.description : 'Master essential skills with this comprehensive workbook covering strategy, implementation, and best practices.' %>">
    <meta name="twitter:image" content="https://top-voices-workbook.vercel.app/<%= workbook && workbook.image ? workbook.image : 'caleb-photo.webp' %>">
    <meta name="twitter:image:alt" content="<%= workbook ? workbook.author + ' - ' + workbook.title : 'Top Voices Workbook' %>">
    
    <% if (workbook && workbook.author) { %>
    <!-- LinkedIn specific -->
    <meta property="article:author" content="<%= workbook.author %>">
    <meta property="article:section" content="<%= workbook.tags ? workbook.tags[0] : 'Education' %>">
    <% } %>
    
    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</head>
<body class="min-h-screen bg-background">
    <!-- Navigation -->
    <nav class="sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
        <div class="container mx-auto px-4">
            <div class="flex h-16 items-center justify-between">
                <div class="flex items-center space-x-4">
                    <a href="/" class="flex items-center space-x-2 font-heading font-bold text-xl">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                            <i data-lucide="bookmark" class="w-4 h-4 text-primary-foreground"></i>
                        </div>
                        <span>Top Voices Workbook</span>
                    </a>
                </div>
                
                <div class="flex items-center space-x-4">
                    <a href="/" class="btn-outline text-sm">
                        <i data-lucide="home" class="w-4 h-4 mr-2"></i>
                        All Workbooks
                    </a>
                    <button id="theme-toggle" class="btn-outline p-2">
                        <i data-lucide="sun" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

<!-- Hero Section -->
<section class="relative overflow-hidden bg-gradient-to-br from-background via-background to-muted/20">
    <div class="container mx-auto px-4 py-20">
        <div class="text-center mb-16 animate-on-scroll">
            <% if (workbook) { %>
            <div class="badge bg-primary/10 text-primary border-primary/20 mb-6">
                ðŸ“š <%= workbook.author %>'s Workbook
            </div>
            <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-heading font-bold leading-tight mb-6">
                <%= workbook.title %>
                <% if (workbook.subtitle) { %>
                <span class="block text-lg sm:text-xl lg:text-2xl font-normal text-muted-foreground mt-2">
                    <%= workbook.subtitle %>
                </span>
                <% } %>
            </h1>
            <p class="text-base sm:text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto mb-8 leading-relaxed">
                <%= workbook.description %>
            </p>
            <div class="inline-flex items-center gap-6 text-sm text-muted-foreground">
                <div class="flex items-center gap-2">
                    <i data-lucide="book-open" class="w-4 h-4"></i>
                    <span><%= totalChapters %> Chapters</span>
                </div>
                <div class="flex items-center gap-2">
                    <i data-lucide="layers" class="w-4 h-4"></i>
                    <span><%= toc.length %> Sections</span>
                </div>
                <div class="flex items-center gap-2">
                    <i data-lucide="clock" class="w-4 h-4"></i>
                    <span><%= workbook.duration %></span>
                </div>
                <% if (workbook.difficulty) { %>
                <div class="flex items-center gap-2">
                    <i data-lucide="signal" class="w-4 h-4"></i>
                    <span><%= workbook.difficulty %></span>
                </div>
                <% } %>
            </div>
            <% } else { %>
            <div class="badge bg-primary/10 text-primary border-primary/20 mb-6">
                ðŸ“š Complete Notes Collection
            </div>
            <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-heading font-bold leading-tight mb-6">
                Workbook
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600">
                    Contents
                </span>
            </h1>
            <p class="text-base sm:text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto mb-8 leading-relaxed">
                A comprehensive learning experience with structured chapters and actionable insights.
            </p>
            <div class="inline-flex items-center gap-6 text-sm text-muted-foreground">
                <div class="flex items-center gap-2">
                    <i data-lucide="book-open" class="w-4 h-4"></i>
                    <span><%= totalChapters %> Chapters</span>
                </div>
                <div class="flex items-center gap-2">
                    <i data-lucide="layers" class="w-4 h-4"></i>
                    <span><%= toc.length %> Sections</span>
                </div>
            </div>
            <% } %>
        </div>
    </div>
    
    <!-- Decorative elements -->
    <div class="absolute top-20 right-20 w-72 h-72 bg-primary/5 rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 left-20 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"></div>
</section>

<% if (workbook && workbook.tags) { %>
<!-- Course Tags -->
<section class="py-8 bg-muted/30">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <div class="flex flex-wrap items-center justify-center gap-2">
                <span class="text-sm text-muted-foreground mr-2">Topics:</span>
                <% workbook.tags.forEach(tag => { %>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary">
                    <%= tag %>
                </span>
                <% }); %>
            </div>
        </div>
    </div>
</section>
<% } %>

<!-- Chapter Sections -->
<section class="py-20 bg-muted/30">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <!-- Sections Overview -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-<%= Math.min(4, toc.length) %> gap-4 sm:gap-6 mb-16">
                <% 
                const sectionColors = ['blue', 'green', 'purple', 'orange', 'pink', 'indigo'];
                const sectionIcons = ['target', 'edit-3', 'users', 'dollar-sign', 'zap', 'brain'];
                %>
                <% toc.forEach((section, index) => { %>
                <% const colorClass = sectionColors[index % sectionColors.length]; %>
                <% const iconClass = sectionIcons[index % sectionIcons.length]; %>
                <div class="card p-4 sm:p-6 text-center hover:shadow-lg transition-all duration-300 bg-gradient-to-br from-<%= colorClass %>-500/5 to-<%= colorClass %>-600/5 border-<%= colorClass %>-500/10 animate-on-scroll">
                    <div class="w-12 h-12 bg-<%= colorClass %>-500/10 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="<%= iconClass %>" class="w-6 h-6 text-<%= colorClass %>-500"></i>
                    </div>
                    <h3 class="font-semibold mb-2 text-sm truncate" title="<%= section.title %>"><%= section.title %></h3>
                    <div class="text-2xl font-bold text-<%= colorClass %>-500 mb-1"><%= section.chapters.length %></div>
                    <div class="text-sm text-muted-foreground">Chapters</div>
                </div>
                <% }); %>
            </div>
            
            <!-- Table of Contents -->
            <div class="space-y-16">
                <% toc.forEach((section, sectionIndex) => { %>
                <% const colorClass = sectionColors[sectionIndex % sectionColors.length]; %>
                <% const iconClass = sectionIcons[sectionIndex % sectionIcons.length]; %>
                    
                <div class="animate-on-scroll">
                    <!-- Section Header -->
                    <div class="flex items-center gap-6 mb-12">
                        <div class="w-20 h-20 bg-gradient-to-br from-<%= colorClass %>-500/10 to-<%= colorClass %>-600/10 rounded-2xl flex items-center justify-center border border-<%= colorClass %>-500/20">
                            <i data-lucide="<%= iconClass %>" class="w-10 h-10 text-<%= colorClass %>-500"></i>
                        </div>
                        <div>
                            <h2 class="text-4xl font-heading font-bold text-foreground mb-2">
                                <%= section.title %>
                            </h2>
                            <p class="text-lg text-muted-foreground">
                                <%= section.chapters.length %> chapters â€¢ Essential concepts and actionable strategies
                            </p>
                        </div>
                    </div>
                    
                    <!-- Chapters Grid -->
                    <div class="grid gap-4">
                        <% section.chapters.forEach((chapter, index) => { %>
                            <a href="/workbook/<%= workbook ? workbook.slug : 'unknown' %>/<%= chapter.id %>" 
                               class="card p-4 sm:p-6 lg:p-8 hover:shadow-xl transition-all duration-300 group block bg-gradient-to-br from-<%= colorClass %>-500/[0.02] to-<%= colorClass %>-600/[0.02] border-<%= colorClass %>-500/10 hover:border-<%= colorClass %>-500/20">
                                <div class="flex items-center gap-4 sm:gap-6">
                                    <div class="w-16 h-16 bg-gradient-to-br from-<%= colorClass %>-500/10 to-<%= colorClass %>-600/10 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-<%= colorClass %>-500 group-hover:text-white transition-all duration-300 border border-<%= colorClass %>-500/20">
                                        <span class="font-bold text-lg"><%= chapter.id %></span>
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="font-heading font-bold text-lg sm:text-xl mb-2 group-hover:text-<%= colorClass %>-600 transition-colors">
                                            <%= chapter.title %>
                                        </h3>
                                        <div class="text-sm sm:text-base text-muted-foreground">
                                            Chapter <%= chapter.id %> â€¢ Estimated 15 min read â€¢ Essential concepts and actionable strategies
                                        </div>
                                    </div>
                                    <div class="opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:translate-x-1">
                                        <i data-lucide="arrow-right" class="w-6 h-6 text-<%= colorClass %>-500"></i>
                                    </div>
                                </div>
                            </a>
                        <% }); %>
                    </div>
                </div>
                <% }); %>
            </div>
        </div>
    </div>
</section>

<!-- Start Reading CTA -->
<section class="py-20 bg-gradient-to-br from-primary/5 to-blue-500/5">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center animate-on-scroll">
            <div>
                <h3 class="text-2xl sm:text-3xl lg:text-4xl font-heading font-bold mb-6">
                    <% if (workbook) { %>
                    Ready to Start
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600">
                        <%= workbook.author %>'s Workbook?
                    </span>
                    <% } else { %>
                    Ready to Start Your
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600">
                        Learning Journey?
                    </span>
                    <% } %>
                </h3>
                <p class="text-base sm:text-lg lg:text-xl text-muted-foreground mb-8 lg:mb-10 max-w-2xl mx-auto leading-relaxed">
                    <% if (workbook) { %>
                    Begin with Chapter 1 and work through <%= workbook.title %> at your own pace. 
                    Transform your knowledge with structured, actionable insights from <%= workbook.author %>.
                    <% } else { %>
                    Begin with Chapter 1 and work through the complete system at your own pace. 
                    Transform your knowledge with structured, actionable content.
                    <% } %>
                </p>
                <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
                    <% if (workbook) { %>
                    <a href="/workbook/<%= workbook.slug %>/1" class="btn-primary text-base sm:text-lg h-12 sm:h-14 px-6 sm:px-10 justify-center">
                        <i data-lucide="play-circle" class="w-4 sm:w-5 h-4 sm:h-5 mr-2"></i>
                        Start Chapter 1
                    </a>
                    <% } %>
                    <a href="/" class="btn-outline text-base sm:text-lg h-12 sm:h-14 px-6 sm:px-10 justify-center">
                        <i data-lucide="home" class="w-4 sm:w-5 h-4 sm:h-5 mr-2"></i>
                        <% if (workbook) { %>Browse Other Workbooks<% } else { %>All Workbooks<% } %>
                    </a>
                    <% if (workbook && workbook.authorWebsite) { %>
                    <a href="<%= workbook.authorWebsite %>" target="_blank" class="btn-secondary text-base sm:text-lg h-12 sm:h-14 px-6 sm:px-10 justify-center">
                        <i data-lucide="external-link" class="w-4 sm:w-5 h-4 sm:h-5 mr-2"></i>
                        Visit <%= workbook.author %>'s Site
                    </a>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Navigation -->
<div class="fixed bottom-6 right-6 z-50">
    <div class="card p-4 shadow-lg">
        <div class="text-center">
            <div class="text-sm font-medium mb-2">Quick Start</div>
            <% if (workbook) { %>
            <a href="/workbook/<%= workbook.slug %>/1" class="btn-primary btn-sm">
                <i data-lucide="rocket" class="w-4 h-4 mr-1"></i>
                Start Reading
            </a>
            <% } else { %>
            <a href="/" class="btn-primary btn-sm">
                <i data-lucide="home" class="w-4 h-4 mr-1"></i>
                Browse Workbooks
            </a>
            <% } %>
        </div>
    </div>
</div>

<script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Theme toggle
    const themeToggle = document.getElementById("theme-toggle");
    const html = document.documentElement;
    
    themeToggle?.addEventListener("click", () => {
        html.classList.toggle("dark");
        const icon = themeToggle.querySelector("[data-lucide]");
        icon.setAttribute("data-lucide", html.classList.contains("dark") ? "moon" : "sun");
        lucide.createIcons();
        
        // Save preference
        localStorage.setItem("theme", html.classList.contains("dark") ? "dark" : "light");
    });
    
    // Load saved theme
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark" || (!savedTheme && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
        html.classList.add("dark");
        const icon = themeToggle?.querySelector("[data-lucide]");
        if (icon) {
            icon.setAttribute("data-lucide", "moon");
            lucide.createIcons();
        }
    }
    
    // Add animation to elements as they come into view
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');
            }
        });
    }, observerOptions);
    
    // Observe elements with animation classes
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
    });
</script>
</body>
</html>